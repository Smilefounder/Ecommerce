@model HalRuleEditorModel

<style type="text/css">
    .checkbox-field { width: 25%; }
</style>
@using (Html.BeginForm("SaveRule", "Hal", RouteValues.From(Request.QueryString), FormMethod.Post, new Dictionary<string, object> { { "id", "resource-rule-form" } }))
{
    @Html.ValidationSummary(true)

    @Html.HiddenFor(m => m.Id)
    <div class="common-form">
        <table>
            @Html.EditorFor(m => m.Name, new { HtmlAttributes = new { @class = "medium" } })
            <tr>
                <th>
                    <label>
                        @("Conditions".Localize())
                    </label>
                </th>
                <td>
                    <div class="conditions-expression">
                        <span class="container">@Html.Raw(new Kooboo.Commerce.Web.Areas.Commerce.Models.Rules.ConditionsExpressionPrettifier().Prettify(Model.ConditionsExpression, typeof(HalContext)))</span>
                        <a class="action" href="#" onclick="EditRule();">@Html.IconImage("edit-small")</a>
                        <a class="action" href="#" onclick="DeleteRule();">@Html.IconImage("minus-small")</a>
                    </div>
                    @Html.HiddenFor(m => m.ConditionsExpression)
                </td>
            </tr>
            <tr>
                <th>
                    <label>
                        @("Resources".Localize())
                    </label><br />
                    <button type="button" onclick="$('input:checkbox[name=Resources]').prop('checked', true);">@("Select All".Localize())</button><br/><br />
                    <button type="button" onclick="$('input:checkbox[name=Resources]').prop('checked', false);">@("Unselect All".Localize())</button><br /><br />
                    <button type="button" onclick="$('input:checkbox[name=Resources]').each(function() { $(this).prop('checked', !$(this).prop('checked')); });">@("Reverse Select".Localize())</button>
                </th>
                <td>
                    @foreach (var res in ViewBag.Resources)
                    {
                        <div class="checkbox-field">
                            <input name="Resources" type="checkbox" value="@res.ResourceName" @(Model.Resources.Any(o => o.ResourceName == res.ResourceName) ? "checked='checked'" : "")>
                            <label for="Resources" class="inline">@res.ResourceName</label>
                        </div>
                    }
                </td>
            </tr>
        </table>
    </div>
}

